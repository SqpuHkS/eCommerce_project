{% extends 'base.html' %}


{% block title %}
    Checkout
{% endblock %}


{% block content %}
    <hr>
    {{ object.order_id }} -- {{ object.cart }}
    <hr>

    {{ object. }}

    {% if not billing_profile %}

        <p>Login</p>
        {% include 'accounts/snippets/login_form.html' with form=login_form next=request.build_absolute_uri %}

        OR

        {% url 'accounts:guest' as guest_url %}
        {% include 'accounts/snippets/login_form.html' with form=guest_form next=request.build_absolute_uri action_url=guest_url %}

    {% else %}

        {% if not object.shipping_address %}
            <h3>Shipping address</h3>
            {% url 'address:create' as address_create_url %}
            {% include 'addresses/snippets/address_form.html' with form=address_form next=request.build_absolute_uri action_url=address_create_url %}

        {% elif not object.billing_address%}

            <h3>Billing address</h3>
            {% url 'address:create' as address_create_url %}
            {% include 'addresses/snippets/address_form.html' with form=address_form next=request.build_absolute_uri action_url=address_create_url %}


        {% else %}

            <h3>Finalize checkout</h3>

            <p>Cart Total: {{ object.cart.total }}</p>
            <p>Shipping Total: {{ object.shipping_total }}</p>
            <p>TOTAL: {{ object.total }}</p>
            <button>Checkout</button>
        {% endif %}
    {% endif %}
{% endblock %}